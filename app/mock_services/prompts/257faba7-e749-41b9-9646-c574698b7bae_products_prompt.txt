MODEL: openai/gpt-oss-20b
BRANCH: PRODUCTS

=== SYSTEM ===
You convert OCR tokens into structured JSON describing product rows.

Input:

A JSON template ("PRODUCT TEMPLATE") that lists every per-product field.
Each field is an object with:
"value": string (initially "").
"token_refs": array of token ids (initially []).

Optional "FIELD HINTS" that describe how to extract product-related data.

A list of OCR tokens ("RAW TOKENS"), each given as:
token_id:
token_text

Optional "TABLE CANDIDATES" block that contains raw HTML/delimited table tokens.

Your task:

Create product_1, product_2, ... for every real product row you find in the RAW TOKENS.
For each product_N, copy the PRODUCT TEMPLATE exactly (same child fields) and fill only "value" and "token_refs".
When you set a non-empty "value", add the token ids you used to "token_refs"; otherwise leave [].
If a field is unknown, leave "value" as "".
Copy text EXACTLY as it appears in the tokens/tables. Do NOT invent data.
The value can be, but is not guaranteed to be a FULL section. There can be multiple values in one section (one token id) or a value can be spread out between different sections. Basically your goal is to accurately fill the value, following the hints, and only then you should start to care about token_refs, to find the one that best corresponds to this value.
Output MUST be a single valid JSON object with one top-level key "products" containing product_1, product_2, ...
Return ONLY the completed JSON, with no explanations or extra text.

=== USER ===
-- part 1 (text) --
=== PRODUCT TEMPLATE ===
{"name_product": {"value": "", "token_refs": []}, "latin_name": {"value": "", "token_refs": []}, "packages": {"value": "", "token_refs": []}, "net_weight": {"value": "", "token_refs": []}, "factory_number": {"value": "", "token_refs": []}, "date_of_production": {"value": "", "token_refs": []}, "seal_number": {"value": "", "token_refs": []}, "unit_box": {"value": "", "token_refs": []}}
=== END PRODUCT TEMPLATE ===
-- part 2 (text) --
=== FIELD HINTS ===
doc_type: VETERINARY_CERTIFICATE
products: Блок «products» расширяемый: создай product_1, product_2, … по количеству товарных строк/партии в разделах 2.1–2.8. Соблюдай порядок. Если атрибут указан один раз общим блоком (например, одна ветпломба/один латинский вид), продублируй его в соответствующие product_i. В token_refs укажи ссылки на исходные фрагменты (ячейки/строки), из которых собрано значение. :contentReference[oaicite:9]{index=9}
products[*].name_product: П.2.1 «Name of the product». Извлеки коммерческое наименование (например, «ATLANTIC SALMON … FILLETS» без латинского вида) и добавь текст в products[i].name_product.
products[*].latin_name: П.2.1: если рядом с наименованием указан латинский вид в скобках (например, «SALMO SALAR»), извлеки его отдельно и добавь вместе в products[i].latin_name. Если нет — оставь пустым.
products[*].packages: П.2.4 «Number of packages». Извлеки количество мест. Если указано несколько значений (по партиям) — перечисли через «; » в одной строке. Добавь значение в products[i].packages.
products[*].net_weight: П.2.5 «Net weight (kg)». Извлеки массу нетто (в кг) ровно в исходном формате (точка/запятая). Если значений несколько — перечисли через «; ». Добавь число(а) в products[i].net_weight.
products[*].factory_number: П.2.7 «Identification marks». Извлеки регистрационный номер предприятия/establishment No (например, «10751»). Если значений несколько — перечисли через «; ». Добавь значение в products[i].factory_number.
products[*].date_of_production: П.2.2 «Date of production». Если дат несколько, перечисли их через «; » одной строкой. Добавь в products[i].date_of_production.
products[*].seal_number: П.2.6 «Number of seal». Извлеки номер(а) ветпломбы для позиции. Если в сертификате указан один номер для всей партии — продублируй его и на уровень документа (поле veterinary_seal). Несколько значений перечисли через «; ». Добавь значение(я) в products[i].seal_number.
products[*].unit_box: Это поле соответствует п.2.3 «Type of package». Извлеки тип упаковки (например, «CARDBOARD BOXES»). Сохрани формулировку как в бланке и добавь в products[i].unit_box.
=== END FIELD HINTS ===
-- part 3 (text) --
=== RAW TOKENS ===
p0_t1:
MAERSK LINE

p0_t2:
BILL OF LADING FOR OCEAN TRANSPORT
OR MULTIMODAL TRANSPORT

p0_t3:
MAEU

p0_t4:
430000 565585102

p0_t6:
Salmones
SALMONES ANTARTICA S.A.
AV. PROVIDENCIA 2653, PISO 15
SANTIAGO, CHILE
TEL: 56-02-24143503

p0_t7:
695485739

p0_t9:
The command

p0_t10:
297272933

p0_t11:
Original end meeting (not part of carriage as stated in clause 1). For account and dis. of Merchants'

p0_t12:
GOD MOREOORO,
117036, MOSCOW, PROFSOYUZNAYA STREET, 3,
OFFICE 412
RUSSIA

p0_t13:
117036, MOSCOW, PROFSOYUZNAYA STREET, 3
OFFICE 412
RUSSIA
lgg@moreodor.ru

p0_t14:
LEXA MAERSK

p0_t15:
935N

p0_t16:
Mars is a planet, applicable only when the planet used is a stationary planet (i.e. the distance

p0_t17:
text of learning

p0_t18:
San Vicente, Chile

p0_t19:
ST. PETERSBURG RUSSIA

p0_t20:
The above statement, together with the other documents herewith attached hereto, constitutes the complete statement of all material transactions between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and all material contracts between us and our stockholders, and all material agreements between us and our stockholders, and

p0_t21:
PARTICULARS FURNISHED BY SHIPPER

p0_t22:
# India of Inclusive Development of goods, Marks and Trademarks - Consumer No. Total No.

p0_t25:
1 Container Said to Contain 880 CARTONS

p0_t26:
1X40' HC REEFER CONTAINER WITH:
880 CARTONS

FROZEN RAINBOW TROUT HG
(ONCORHYNCHUS MYKISS)
22,000.00 KGS NET WEIGHT

SIZE 6-9 LB (2.7 -4.0 KG) 832 CARTONS
SIZE 9-12 LB (4.0 - 5.4 KG) 48 CARTONS

GROSS WEIGHT 24.200.00 KG

VETERINARY CERTIFICATE: 1142728
COMMODITY CODE: 0303142000
FREIGHT PREPAID

p0_t27:
COMMODITY CODE: 0303142000

p0_t28:
SALMONES ANTARTICA S.A.
(FACTORY NUMBER: 10735)

p0_t29:
PONU4832160 ML-CL0931771 40 REEF 9'6 880 CARTONS 24200.000 KGS 58.0000 CBM

p0_t30:
Temperature, -23.0 C

p0_t31:
Above particulars are declared by Shewter but without responsibility of or representation by Carter (but class 14).

p0_t32:
<table><thead><tr><th>Freight & Charges</th><th>Date</th><th>Unit</th><th>Currency</th><th>Prepaid</th><th>Check</th></tr></thead><tbody><tr><td>Cartier's Receipt (this clause 1 and 101 Total number of containers or packages received by Cartier's</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>1 container</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>1/THREE</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>Cartier's Receipt (this clause 1 and 101 Total number of containers or packages received by Cartier's</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>1 container</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>1/THREE</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>Cartier's Receipt (this clause 1 and 101 Total number of containers or packages received by Cartier's</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>1 container</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>1/THREE</td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table>
=== END RAW TOKENS ===
-- part 4 (text) --
=== TABLE CANDIDATES ===
p0_t32:
<table><thead><tr><th>Freight & Charges</th><th>Date</th><th>Unit</th><th>Currency</th><th>Prepaid</th><th>Check</th></tr></thead><tbody><tr><td>Cartier's Receipt (this clause 1 and 101 Total number of containers or packages received by Cartier's</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>1 container</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>1/THREE</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>Cartier's Receipt (this clause 1 and 101 Total number of containers or packages received by Cartier's</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>1 container</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>1/THREE</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>Cartier's Receipt (this clause 1 and 101 Total number of containers or packages received by Cartier's</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>1 container</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>1/THREE</td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table>
=== END TABLE CANDIDATES ===
