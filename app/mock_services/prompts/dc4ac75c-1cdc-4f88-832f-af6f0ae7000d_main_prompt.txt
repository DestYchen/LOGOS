MODEL: openai/gpt-oss-20b
BRANCH: MAIN

=== SYSTEM ===
You convert OCR tokens into a structured JSON object of fields.

Input:

A JSON template ("FIELDS TEMPLATE") that defines all output fields.
Each field is an object with:
"value": string (initially "").
"token_refs": array of token ids (initially []).

Optional "FIELD HINTS" that describe how to extract each field.

A list of OCR tokens ("RAW TOKENS"), each given as:
token_id:
token_text

Your task:

Use ONLY the RAW TOKENS to fill "value" and "token_refs" in the FIELDS TEMPLATE.
When you set a non-empty "value", add in "token_refs" the first token ids whose text you used (even if there are multiple mentions).
If you cannot confidently find a value, leave "value" as "" and "token_refs" as [].
Copy text EXACTLY as it appears in the tokens (no corrections, no reformatting).
Do NOT invent or guess values.
The value can be, but is not guaranteed to be a FULL section. There can be multiple values in one section (one token id) or a value can be spread out between different sections. Basically your goal is to accurately fill the value, following the hints, and only then you should start to care about token_refs, to find the one that best corresponds to this value.
Do NOT change the JSON structure: do not add, remove, or rename fields.
Output MUST be a single valid JSON object with the same structure as the FIELDS TEMPLATE.
Return ONLY the completed JSON, with no explanations or extra text.

=== USER ===
-- part 1 (text) --
=== FIELDS TEMPLATE ===
{"packing_list_date": {"value": "", "token_refs": []}, "invoice_no": {"value": "", "token_refs": []}, "producer": {"value": "", "token_refs": []}, "buyer": {"value": "", "token_refs": []}, "seller": {"value": "", "token_refs": []}, "veterinary_seal": {"value": "", "token_refs": []}, "linear_seal": {"value": "", "token_refs": []}, "country_of_origin": {"value": "", "token_refs": []}}
=== END FIELDS TEMPLATE ===
-- part 2 (text) --
=== FIELD HINTS ===
doc_type: PACKING_LIST
packing_list_date: Извлеки дату пакинг-листа из зоны заголовка/шапки («Packing List», «DATE»). Если дата разбита на день/месяц/год, собери в одну строку без нормализации формата. Добавь найденную дату в поле packing_list_date.
invoice_no: Найди ссылку на инвойс по меткам «Invoice No», «P.Code or Invoice N°», «Commercial Invoice». Сохраняй номер точь-в-точь как в документе (включая символы «N°», дефисы и т.п.) и добавь его в поле invoice_no.
producer: Если указан производитель («Producer», «Manufacturer», наименование завода/фабрики) — извлеки полное юр. наименование, при наличии адреса оставь в одной строке. Добавь значение в поле producer.
buyer: Если в бланке есть «Buyer», «Customer», «Consignee» — извлеки полное наименование (и адрес, если есть) одной строкой. Добавь текст в поле buyer. Если поле отсутствует — оставь пустым.
seller: Если в бланке есть «Seller», «Supplier», «Shipper» — извлеки полное наименование одной строкой. Добавь текст в поле seller. Если поле отсутствует — оставь пустым.
veterinary_seal: Ищи явное упоминание ветеринарной пломбы («Veterinary seal», «Health seal»). Не путай с линейной пломбой «Seal No». Если номер ветпломбы указан — сохрани его как есть и добавь в поле veterinary_seal; если нет — оставь пустым.
linear_seal: Извлеки номер(а) линейной пломбы по меткам «Seal No», «Seal Number». Если значений несколько (несколько контейнеров) — перечисли через «; ». Добавь значение(я) в поле linear_seal.
country_of_origin: Если явно указана «Country of origin / Origin» — извлеки страну и добавь в поле country_of_origin. Если нет явного поля, оставь пустым (не выводи страну по косвенным признакам).

invoice_date (candidates): 04-09-2019; 04-10-2019; 05-06-2019; 05-06-2021; 25-07-2019; 25-07-2021; 26-07-2019; 26-07-2021; 27-07-2019; 27-07-2021; 29-07-2019; 29-07-2021; 30-07-2019; 30-07-2021; 31-07-2019; 31-07-2021
container (candidates): CONTAINER NUMBER
=== END FIELD HINTS ===
-- part 3 (text) --
=== RAW TOKENS ===
p0_t0:
Salmones Antártica S.A.

p0_t1:
PACKING LIST

p0_t2:
SHIPPER: SALMONES ANTARTICA S.A.

p0_t3:
AV. PROVIDENCIA 2653 PISO 15 SANTIAGO-CHILE

p0_t4:
CONSIGNEE: OOO "MOREODOR"

p0_t5:
117036, MOSCOW, PROFSOYUZNAYA STEET, 3

p0_t6:
OFFICE 412, RUSSIA

p0_t7:
PRODUCER: SALMONES ANTARTICA S.A.

p0_t8:
CONTAINER NUMBER: PONU4832160

p0_t9:
VESSEL: LEXA MAERSK 935N

p0_t10:
SHIPPED ON BOARD : 04-09-2019

p0_t11:
ETA: 04-10-2019

p0_t12:
PRODUCTION PLANT: SALMONES ANTARTICA S.A. 10735

p0_t13:
PRODUCTION: RAINBOW TROUT IN kg and $PER KG

| PRODUCT | QUALITY | SIZE | PRODUCTION DATE | KG/BOX | CASES | NET. WEIGHT | TECNICAL WEIGHT | GROSS WEIGHT | BEST BEFORE |
|---|---|---|---|---|---|---|---|---|---|
| FROZEN RAINBOW TROUT HG | PREM | 6-9 LB (2,7 - 4,0 KG) | 05-06-2019 | 25 | 1 | 25,00 | 26,25 | 27,50 | 05-06-2021 |
| FROZEN RAINBOW TROUT HG | PREM | 6-9 LB (2,7 - 4,0 KG) | 25-07-2019 | 25 | 104 | 2.600,00 | 2.730,00 | 2.860,00 | 25-07-2021 |
| FROZEN RAINBOW TROUT HG | PREM | 6-9 LB (2,7 - 4,0 KG) | 26-07-2019 | 25 | 227 | 5.675,00 | 5.958,75 | 6.242,50 | 26-07-2021 |
| FROZEN RAINBOW TROUT HG | PREM | 6-9 LB (2,7 - 4,0 KG) | 27-07-2019 | 25 | 161 | 4.025,00 | 4.226,25 | 4.427,50 | 27-07-2021 |
| FROZEN RAINBOW TROUT HG | PREM | 6-9 LB (2,7 - 4,0 KG) | 29-07-2019 | 25 | 56 | 1.400,00 | 1.470,00 | 1.540,00 | 29-07-2021 |
| FROZEN RAINBOW TROUT HG | PREM | 6-9 LB (2,7 - 4,0 KG) | 30-07-2019 | 25 | 200 | 5.000,00 | 5.250,00 | 5.500,00 | 30-07-2021 |
| FROZEN RAINBOW TROUT HG | PREM | 6-9 LB (2,7 - 4,0 KG) | 31-07-2019 | 25 | 83 | 2.075,00 | 2.178,75 | 2.282,50 | 31-07-2021 |
| **SUBTOTAL** |  |  |  |  | **832** | **20.800,00** | **21.

p0_t14:
ISSUE 04-09-2019

p0_t15:
JOHANNA OSORIO
COMMERCIAL ASSISTANT

p0_t16:
SALMONES ANTARTICA S.A.
=== END RAW TOKENS ===
