MODEL: openai/gpt-oss-20b
BRANCH: PRODUCTS

=== SYSTEM ===
You convert OCR tokens into structured JSON describing product rows.

Input:

A JSON template ("PRODUCT TEMPLATE") that lists every per-product field.
Each field is an object with:
"value": string (initially "").
"token_refs": array of token ids (initially []).

Optional "FIELD HINTS" that describe how to extract product-related data.

A list of OCR tokens ("RAW TOKENS"), each given as:
token_id:
token_text

Optional "TABLE CANDIDATES" block that contains raw HTML/delimited table tokens.

Your task:

Create product_1, product_2, ... for every real product row you find in the RAW TOKENS.
For each product_N, copy the PRODUCT TEMPLATE exactly (same child fields) and fill only "value" and "token_refs".
When you set a non-empty "value", add the token ids you used to "token_refs"; otherwise leave [].
If a field is unknown, leave "value" as "".
Copy text EXACTLY as it appears in the tokens/tables. Do NOT invent data.
The value can be, but is not guaranteed to be a FULL section. There can be multiple values in one section (one token id) or a value can be spread out between different sections. Basically your goal is to accurately fill the value, following the hints, and only then you should start to care about token_refs, to find the one that best corresponds to this value.
Output MUST be a single valid JSON object with one top-level key "products" containing product_1, product_2, ...
Return ONLY the completed JSON, with no explanations or extra text.

=== USER ===
-- part 1 (text) --
=== PRODUCT TEMPLATE ===
{"name_product": {"value": "", "token_refs": []}, "latin_name": {"value": "", "token_refs": []}, "packages": {"value": "", "token_refs": []}, "net_weight": {"value": "", "token_refs": []}, "factory_number": {"value": "", "token_refs": []}, "date_of_production": {"value": "", "token_refs": []}, "seal_number": {"value": "", "token_refs": []}, "unit_box": {"value": "", "token_refs": []}}
=== END PRODUCT TEMPLATE ===
-- part 2 (text) --
=== FIELD HINTS ===
doc_type: VETERINARY_CERTIFICATE
products: Блок «products» расширяемый: создай product_1, product_2, … по количеству товарных строк/партии в разделах 2.1–2.8. Соблюдай порядок. Если атрибут указан один раз общим блоком (например, одна ветпломба/один латинский вид), продублируй его в соответствующие product_i. В token_refs укажи ссылки на исходные фрагменты (ячейки/строки), из которых собрано значение. :contentReference[oaicite:9]{index=9}
products[*].name_product: П.2.1 «Name of the product». Извлеки коммерческое наименование (например, «ATLANTIC SALMON … FILLETS» без латинского вида) и добавь текст в products[i].name_product.
products[*].latin_name: П.2.1: если рядом с наименованием указан латинский вид в скобках (например, «SALMO SALAR»), извлеки его отдельно и добавь вместе в products[i].latin_name. Если нет — оставь пустым.
products[*].packages: П.2.4 «Number of packages». Извлеки количество мест. Если указано несколько значений (по партиям) — перечисли через «; » в одной строке. Добавь значение в products[i].packages.
products[*].net_weight: П.2.5 «Net weight (kg)». Извлеки массу нетто (в кг) ровно в исходном формате (точка/запятая). Если значений несколько — перечисли через «; ». Добавь число(а) в products[i].net_weight.
products[*].factory_number: П.2.7 «Identification marks». Извлеки регистрационный номер предприятия/establishment No (например, «10751»). Если значений несколько — перечисли через «; ». Добавь значение в products[i].factory_number.
products[*].date_of_production: П.2.2 «Date of production». Если дат несколько, перечисли их через «; » одной строкой. Добавь в products[i].date_of_production.
products[*].seal_number: П.2.6 «Number of seal». Извлеки номер(а) ветпломбы для позиции. Если в сертификате указан один номер для всей партии — продублируй его и на уровень документа (поле veterinary_seal). Несколько значений перечисли через «; ». Добавь значение(я) в products[i].seal_number.
products[*].unit_box: Это поле соответствует п.2.3 «Type of package». Извлеки тип упаковки (например, «CARDBOARD BOXES»). Сохрани формулировку как в бланке и добавь в products[i].unit_box.
=== END FIELD HINTS ===
-- part 3 (text) --
=== RAW TOKENS ===
p0_t1:
中华人民共和国出入境检验检疫
ENTRY-EXIT INSPECTION AND QUARANTINE
OF THE PEOPLE'S REPUBLIC OF CHINA

p0_t2:
五分

2012年12月25日

p0_t3:
编号 No 201NA1200.0035yy08.001

p0_t4:
ВЕТЕРИНАРНЫЙ СЕРТИФИКАТ

VETERINARY CERTIFICATE

p0_t6:
1. Shipment description / Омmicnno postavku

1.1. Name and address of consignor / Название и адрес грузоотправителя:
QINGDAO CALYPSO FOOD CO.,LTD
ADD NO. 50 HONGKONG MIDDLE ROAD,
SHINAN DISTRICT . QINGDAO,
SHANDONG, CHINA.

1.2. Name and address of consignee / Название и адрес грузополучателя:
ООО"MOREODOR"
117292,MOSCOW,PROFSOYUZNAYA
STREET,3,OFFICE 412 RUSSIA

1.3. Means of Transport / Транспорт:
(№ of wagon, track, container, flight-number,
name of the ship)
(№ вагон, автомобиль, контейнера, полис
самолета, названное судлом)

BY VESSEL:MSC TRADER II/HX451A
CONTAINER NO.:MEDU9763238

1.4. Country(s) of transit / Страна(ы) транспортная:
***

1.5. Certificate № / Сотрудник № 224N4209003599900J

Veterinary certificate for products of fish, cattle, swine, animal, fishery, animal health, objects of animal products of their processing, exported to the customs territory of the European Union / Ветеринарный сертификат на экспортную узел на таможине (у) с витамином Е/Eurasickel's economic interest of the country of production of the product and the name, address, phone, address, etc. of the producer, the place of production, the name, address, phone, address, etc. of the consignor, the name, address, phone, address, etc. of the consignee, the name, address, phone, address, etc. of the carrier, the place of delivery, the name, address, phone, address, etc. of the consignor, the name, address, phone, address, etc. of the consignee, the name, address, phone, address, etc. of the carrier, the place of delivery, the name, address, phone, address, etc. of the consignor, the name, address, phone, address, etc. of the consignee, the name, address, phone, address, etc. of the carrier, the place of delivery, the name, address, phone, address, etc. of the consignor, the name, address, phone, address, etc. of the consignee, the name, address, phone, address, etc. of the carrier, the place of delivery, the name, address, phone, address, etc. of the consignor, the name, address, phone, address, etc. of the consignee, the name, address, phone, address, etc. of the carrier, the place of delivery, the name, address, phone, address, etc. of the consignor, the name, address, phone, address, etc. of the consignee, the name, address, phone, address, etc. of the carrier, the place of delivery, the name, address, phone, address, etc. of the consignor, the name, address, phone, address, etc. of the consignee, the name, address, phone, address

p0_t9:
中华人民共和国出入境检验检疫机关及其官员或代表不承担签发本证书的任何经济责任。No financial liability with respect to this certificate shall attach to the only-cause theory of liability and the principle of indemnity of the P. R. of China or to any of its officers or representatives,

p0_t10:
[ce-2(2018.4.20) * 1]

p0_t14:
扫描全能王™

p0_t15:
3亿人都在用的扫描App
=== END RAW TOKENS ===
