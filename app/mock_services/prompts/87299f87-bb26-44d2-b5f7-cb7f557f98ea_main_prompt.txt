MODEL: google/gemma-3-27b
BRANCH: MAIN

=== SYSTEM ===
You convert OCR tokens into a structured JSON object of fields.

Input:

A JSON template ("FIELDS TEMPLATE") that defines all output fields.
Each field is an object with:
"value": string (initially "").
"token_refs": array of token ids (initially []).

Optional "FIELD HINTS" that describe how to extract each field.

A list of OCR tokens ("RAW TOKENS"), each given as:
token_id:
token_text

Your task:

Use ONLY the RAW TOKENS to fill "value" and "token_refs" in the FIELDS TEMPLATE.
When you set a non-empty "value", add in "token_refs" the first token ids whose text you used (even if there are multiple mentions).
If you cannot confidently find a value, leave "value" as "" and "token_refs" as [].
Copy text EXACTLY as it appears in the tokens (no corrections, no reformatting).
Do NOT invent or guess values.
The value can be, but is not guaranteed to be a FULL section. There can be multiple values in one section (one token id) or a value can be spread out between different sections. Basically your goal is to accurately fill the value, following the hints, and only then you should start to care about token_refs, to find the one that best corresponds to this value.
Do NOT change the JSON structure: do not add, remove, or rename fields.
Output MUST be a single valid JSON object with the same structure as the FIELDS TEMPLATE.
Return ONLY the completed JSON, with no explanations or extra text.

=== USER ===
-- part 1 (text) --
=== FIELDS TEMPLATE ===
{"quality_certificate_date": {"value": "", "token_refs": []}, "producer": {"value": "", "token_refs": []}, "container_no": {"value": "", "token_refs": []}, "vessel": {"value": "", "token_refs": []}, "veterinary_seal": {"value": "", "token_refs": []}, "linear_seal": {"value": "", "token_refs": []}}
=== END FIELDS TEMPLATE ===
-- part 2 (text) --
=== FIELD HINTS ===
doc_type: QUALITY_CERTIFICATE
quality_certificate_date: Найди дату сертификата в заголовке/шапке рядом с местом выдачи (пример: «Puerto Montt, July 13th. 2025»). Сохраняй точный формат из документа и добавь дату в поле quality_certificate_date.
producer: Возьми юридическое наименование производителя из блока «Name and Address of processing Plant» (пример: «GRANJA MARINA TORNAGALEONES S A …»). Сохрани только наименование (адрес можно опустить) и добавь его в поле producer.
container_no: Извлеки номер(а) контейнера из строки «Container and Seals Number», формат обычно 4 буквы + 7 цифр (пример: «BMOU 9288991»). Если контейнеров несколько — перечисли через «; ». Добавь значение(я) в поле container_no.
vessel: Найди «Name of Vessel» и извлеки название судна и, если указано, номер рейса/войяжа в одной строке (пример: «MSC TAKORADI VIII - NX528R»). Добавь строку в поле vessel.
veterinary_seal: Извлекай только явные номера ветеринарных/санитарных пломб («Veterinary/Health seal»). Не путай с линейной пломбой «Seal». Если в документе приводится только «SEAL: …» без пометки о ветеринарной пломбе — это линейная пломба, оставь veterinary_seal пустым. Добавь найденное значение в поле veterinary_seal.
linear_seal: Возьми номер(а) линейной пломбы из «Container and Seals Number / SEAL: …» (пример: «FX34197306; A0036355»). Если номеров несколько — запиши через «; ». Добавь значение(я) в поле linear_seal.

invoice_date (candidates): 12/11/2024
container (candidates): CONTAINER AND
=== END FIELD HINTS ===
-- part 3 (text) --
=== RAW TOKENS ===
p0_t0:
RONGCHENG MINGWEI AQUATIC FOOD CO.,LTD

p0_t1:
DONGSHANGZHUANG VILLAGE, SHANGZHUANG TOWN, RONGCHENG, SHANDONG

p0_t2:
QUALITY CERTIFICATE

p0_t3:
发货人 QINGDAO CALYPSO FOOD CO.,LTD

p0_t4:
ADD NO. 50 HONGKONG MIDDLE ROAD, SHINAN DISTRICT, QINGDAO, SHANDONG, CHINA.

p0_t5:
收货人 OOO “MOREODOR”

p0_t6:
117292,MOSCOW,PROFSOYUZNAYA STREET,3,RUSSIA,OFFICE 412

Consignee

p0_t7:
品名

p0_t8:
Description of Goods FROZEN GREEN MUSSELS IN THE HALF SHELL, IQF (PERNA CANALICULUS)

p0_t9:
加工种类或状态

p0_t10:
State or Type of Processing

FROZEN

p0_t11:
报检数量/重量

p0_t12:
Quantity/Weight Declared ***1738CARTONS/**20856KGS

p0_t13:
包装种类及数量

p0_t14:
Number and Type of Packages CARTONS/**1738CARTONS

p0_t15:
运输工具

p0_t16:
Means of Conveyance BY VESSEL

p0_t17:
标记及号码

p0_t18:
| Mark & No.

p0_t19:
3700/02B07

p0_t20:
RESULTS OF INSPECTION:

p0_t21:
THIS IS TO VERIFY THAT MERCHANDISE IS FIT FOR HUMAN CONSUMPTION.

p0_t22:
REMARKS:

p0_t23:
1. CONTAINER AND SEAL NO.: MEDU9763238/FX38428560

p0_t24:
2. REG. NO.: 3700/02B07

p0_t25:
3. DATE OF PRODUCTION: 12/11/2024

p0_t26:
4. EXPIRY DATE: 24 MONTHS FROM PRODUCTION DATE

p0_t27:
5.LOT NO.:24111224024J

p0_t28:
签名 Signature

p0_t30:
签证日期 Date of Issue 18 DEC,2024
=== END RAW TOKENS ===
